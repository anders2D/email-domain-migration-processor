graph TB
    subgraph USUARIOS["ğŸ‘¥ USUARIOS"]
        U1[Analista]
        U2[Sistema Solicitante]
        U3[Sistema Destino]
    end

    subgraph SYSTEM["ğŸ“¦ EMAIL PROCESSOR SYSTEM"]
        subgraph INTERFACES["Interfaces"]
            CLI[ğŸ–¥ï¸ CLI]
            API[ğŸŒ API REST]
            LIB[ğŸ“š Library]
        end

        subgraph CORE["âš™ï¸ CORE DOMAIN"]
            LOGIC[Email Processing Logic<br/>+ Business Rules<br/>BR-001 to BR-005<br/>TR-001 to TR-005]
        end

        subgraph ADAPTERS["ğŸ”Œ Adapters"]
            FILE[ğŸ“„ File Reader]
            CSV[ğŸ“Š CSV Writer]
            VAL[âœ… Validation & Logging]
        end
    end

    U1 --> CLI
    U2 --> API
    U3 --> LIB

    CLI --> LOGIC
    API --> LOGIC
    LIB --> LOGIC

    LOGIC --> FILE
    LOGIC --> CSV
    LOGIC --> VAL

    style USUARIOS fill:#e1f5ff
    style SYSTEM fill:#fff4e6
    style INTERFACES fill:#f3e5f5
    style CORE fill:#e8f5e9
    style ADAPTERS fill:#fce4ec
